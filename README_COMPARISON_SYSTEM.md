# Comprehensive Comparison System

This system creates comprehensive comparison images that gather qualitative results from multiple result folders into unified views.

## ğŸ¯ What It Does

Creates comparison images with the exact layout you requested:
- **LR Sample** | **Bilinear** | **Lafanetre** | **NIR** | **Ours (MSE)** | **HR Reference**

### âœ… Fixed Issues
- **LR Sample**: Now properly generated by downsampling HR reference (not using HR as LR)
- **Titles**: Clean layout without overlapping "Sample X" titles
- **Row Labels**: Sample numbers shown on the left side of each row

## ğŸ“ File Structure

The system automatically finds images in these locations:
- **Handheld Results**: `handheld/results_synthetic_scale_4_shift_1/handheld/SyntheticBurst/`
- **NIR Results**: `burst_synth_df4_nir/sample_XXX/`
- **Ours (MSE) Results**: `burst_synth_df4_inr/sample_XXX/`
- **HR Reference**: `burst_synth_df4_inr/sample_XXX/ground_truth.png`
- **LR Sample**: Generated by downsampling HR reference

## ğŸš€ Usage

### Single Sample Comparison
```bash
python create_comprehensive_comparison.py \
    --sample_indices 0 \
    --datasets burst_synth \
    --scale_factor 4 \
    --output_dir single_comparisons
```

### Multiple Samples in One Image
```bash
python create_combined_comparison.py \
    --sample_indices 0 1 2 3 4 \
    --scale_factor 4 \
    --output_path combined_comparison.png
```

### Large Comparisons
```bash
# Create multiple large comparisons
python create_large_comparison.py

# Create custom comparison
python create_large_comparison.py 0 1 2 3 4 5 6 7 8 9
```

## ğŸ“Š Output Examples

- `index_comparison_0_burst_synth.png` - Single sample comparison
- `combined_comparison.png` - Multiple samples in rows/columns
- `large_comparison_10_samples.png` - Large comparison with 10 samples

## ğŸ”§ Key Features

1. **Index-Based Matching**: Matches samples by position across all folders
2. **Automatic LR Generation**: Creates LR samples by downsampling HR references
3. **Flexible Layout**: Supports single samples or multiple samples in one image
4. **Error Handling**: Gracefully handles missing files
5. **High Quality**: 300 DPI output for publication-ready images

## ğŸ“ Sample Index Mapping

The system uses index-based matching:
- Index 0: Handheld=0006, NIR=sample_000, Ours=sample_000
- Index 1: Handheld=0013, NIR=sample_001, Ours=sample_001
- Index 2: Handheld=0014, NIR=sample_002, Ours=sample_002
- etc.

## ğŸ¨ Layout Options

### Single Sample (6 columns Ã— 1 row)
```
LR Sample | Bilinear | Lafanetre | NIR | Ours (MSE) | HR Reference
```

### Multiple Samples (6 columns Ã— N rows)
```
LR Sample | Bilinear | Lafanetre | NIR | Ours (MSE) | HR Reference
LR Sample | Bilinear | Lafanetre | NIR | Ours (MSE) | HR Reference
LR Sample | Bilinear | Lafanetre | NIR | Ours (MSE) | HR Reference
...
```

## ğŸ› ï¸ Troubleshooting

- **Missing files**: The system will show "(Not Found)" for missing images
- **Index out of range**: Use smaller sample indices or check available samples
- **Image loading errors**: Check file permissions and image formats

## ğŸ“ˆ Performance

- Handles up to 50+ samples per comparison
- Generates high-quality 300 DPI images
- Fast processing with parallel image loading
